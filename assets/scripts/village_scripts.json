{
    "to_forest_portal": {
        "scene": "village",
        "trigger": {
            "event": "portal_entered",
            "portal": "to_forest"
        },
        "actions": [
            {
                "type": "change_scene",
                "target_map": "forest.tmx",
                "spawn_waypoint": "from_village"
            }
        ],
        "conditions": [{
            "check": "script_completed",
            "script": "after_first_talk"
        }],
        "on_condition_fail": [{
            "type": "dialog",
            "speaker": "Player",
            "text": [
                "I can't go into the forest by myself!"
            ]
        }]
    },
    "after_first_talk": {
        "scene": "village",
        "trigger": {
            "event": "dialog_closed",
            "npc": "merchant",
            "dialog_level": 0
        },
        "run_once": true,
        "actions": [
            {
                "type": "move_npc",
                "npcs": [
                    "merchant"
                ],
                "waypoint": "merchant_exit"
            },
            {
                "type": "wait_for_movement",
                "npc": "merchant"
            },
            {
                "type": "start_disappear_animation",
                "npcs": ["merchant"]
            },
            {
                "type": "wait_for_npcs_disappear",
                "npcs": ["merchant"]
            }
        ]
    }
}
