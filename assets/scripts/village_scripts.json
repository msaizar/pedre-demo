{
    "village_scene_start": {
        "scene": "village",
        "run_once": true,
        "trigger": {
            "event": "scene_start"
        },
        "actions": [
            {
                "type": "dialog",
                "speaker": "Info",
                "text": [
                    "Welcome to Pedre demo. Try opening the first door, leaving the scene, and then talking to the merchant."
                ]
            },
            {
                "type": "wait_for_dialog_close"
            },
            {
                "type": "emit_particles",
                "particle_type": "burst",
                "player": true
            }

        ]
    },
    "talk_to_merchant": {
        "scene": "village",
        "trigger": {
            "event": "dialog_opened",
            "npc": "merchant",
            "dialog_level": 0
        },
        "actions": [
            {
                "type": "play_sfx",
                "file": "greeting.wav"
            },
            {
                "type": "emit_particles",
                "particle_type": "burst",
                "npc": "merchant"
            }
        ]
    },
    "to_forest_portal": {
        "scene": "village",
        "trigger": {
            "event": "portal_entered",
            "portal": "to_forest"
        },
        "actions": [
            {
                "type": "change_scene",
                "target_map": "forest.tmx",
                "spawn_waypoint": "from_village"
            }
        ],
        "conditions": [{
            "check": "script_completed",
            "script": "after_first_talk"
        }],
        "on_condition_fail": [{
            "type": "dialog",
            "speaker": "Player",
            "text": [
                "I can't go into the forest by myself!"
            ]
        }]
    },
    "after_first_talk": {
        "scene": "village",
        "trigger": {
            "event": "dialog_closed",
            "npc": "merchant",
            "dialog_level": 0
        },
        "run_once": true,
        "actions": [
            {
                "type": "move_npc",
                "npcs": [
                    "merchant"
                ],
                "waypoint": "merchant_exit"
            },
            {
                "type": "wait_for_movement",
                "npc": "merchant"
            },
            {
                "type": "start_disappear_animation",
                "npcs": ["merchant"]
            },
            {
                "type": "wait_for_npcs_disappear",
                "npcs": ["merchant"]
            }
        ]
    },
    "open_village_door": {
        "scene": "village",
        "trigger": {
            "event": "object_interacted",
            "object_name": "golden_door"
        },
        "run_once": true,
        "actions": [
            {
                "type": "dialog",
                "speaker": "Info",
                "text": [
                    "You've opened the golden door! Thanks for trying the demo."
                ]
            },
            {
                "type": "emit_particles",
                "particle_type": "burst",
                "interactive_object": "golden_door"
            }
        ],
        "conditions": [
            {
                "check": "item_acquired",
                "item_id": "golden_key"
            }
        ],
        "on_condition_fail": [
            {
                "type": "dialog",
                "speaker": "Player",
                "text": [
                    "I'm missing a key for this locked door."
                ]
            }
        ]
    }
}
